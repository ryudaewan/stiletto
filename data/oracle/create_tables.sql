CREATE TABLE TB_CUST
(
    CUST_ID VARCHAR2(10),
    COUNTRY_CD CHAR(3) DEFAULT 'KR',
    ADDRESS VARCHAR2(255),
    ZIPCD VARCHAR2(6),
    TEL_NO VARCHAR2(30),
    FAX_NO VARCHAR2(30),
    REP_PERSON_NM VARCHAR2(50),
    CLOSE_YN CHAR(1) DEFAULT 'Y',
	CONSTRAINT PK_TB_CUST PRIMARY KEY (CUST_ID),
);
COMMENT ON COLUMN TB_CUST.CUST_ID IS 'id';
COMMENT ON COLUMN TB_CUST.COUNTRY_CD IS '국적';
COMMENT ON COLUMN TB_CUST.ADDRESS IS '주소';
COMMENT ON COLUMN TB_CUST.ZIPCD IS '우편번호';
COMMENT ON COLUMN TB_CUST.TEL_NO IS '전화번호';
COMMENT ON COLUMN TB_CUST.FAX_NO IS '팩스번호';
COMMENT ON COLUMN TB_CUST.REP_PERSON_NM IS '대표자 성명';
COMMENT ON COLUMN TB_CUST.CLOSE_YN IS '폐업 유무';

CREATE TABLE TB_CUST_IDFY_NO
(
    CUST_ID VARCHAR2(10) NOT NULL,
    IDFY_NO VARCHAR2(50) NOT NULL,
    ISSUER_CD VARCHAR2(4) NOT NULL,
    CONSTRAINT PK_TB_CUST_IDFY_NO PRIMARY KEY (CUST_ID, ISSUER_CD),
    CONSTRAINT FK_CUST_IDFY_NO_INFO_CUST FOREIGN KEY (CUST_ID) REFERENCES TB_CUST (CUST_ID)
);
COMMENT ON TABLE STILETTOADM.TB_CUST_IDFY_NO IS '고객 식별번호 정보';
COMMENT ON COLUMN STILETTOADM.TB_CUST_IDFY_NO.cust_id IS '고객ID';
COMMENT ON COLUMN STILETTOADM.TB_CUST_IDFY_NO.idfy_no IS '고객사에 대해 국가 / 기업정보 판매 업체 등이 부여하는 식별번호를 관리 (ex. 한국의 사업자번호, 법인번호, 중국의 영업집조번호, D&B의 DUNS 번호 등)';
COMMENT ON COLUMN STILETTOADM.TB_CUST_IDFY_NO.issuer_cd IS '식별번호 발급 기관 코드';

CREATE TABLE TB_CUST_NM
(
    CUST_ID VARCHAR2(10) NOT NULL,
    LANG_CD vachar2(6) DEFAULT 'ko_KR'  NOT NULL,
    CUST_NM VARCHAR2(50),
    CONSTRAINT PK_TB_CUST_NM PRIMARY KEY (CUST_ID, LANG_CD),
    CONSTRAINT FK_TB_CUST_NM_TB_CUST FOREIGN KEY (CUST_ID) REFERENCES TB_CUST (CUST_ID)
);
COMMENT ON COLUMN TB_CUST_NM.CUST_ID IS 'id';
COMMENT ON COLUMN TB_CUST_NM.LANG_CD IS '언어코드';
COMMENT ON COLUMN TB_CUST_NM.CUST_NM IS '고객명';

CREATE TABLE TB_CUST_REL
(
    CHILD_CUST_ID VARCHAR2(10) PRIMARY KEY NOT NULL,
    PARENT_CUST_ID VARCHAR2(10) NOT NULL,
    CONSTRAINT FK_CHILD_CUST_REL FOREIGN KEY (CHILD_CUST_ID) REFERENCES TB_CUST (CUST_ID),
    CONSTRAINT FK_PARENT_CUST_REL FOREIGN KEY (PARENT_CUST_ID) REFERENCES TB_CUST (CUST_ID)
);
COMMENT ON COLUMN TB_CUST_REL.CHILD_CUST_ID IS '자회사 ID';
COMMENT ON COLUMN TB_CUST_REL.PARENT_CUST_ID IS '모회사 ID';

drop table tb_lgcy_sys_cust;
CREATE TABLE TB_LGCY_SYS_CUST
(
    CUST_ID VARCHAR2(10) NOT NULL,
    LGCY_SYS_CD CHAR(3) NOT NULL,
    LGCY_CUST_ID VARCHAR2(10),
    LGCY_CUST_NM VARCHAR2(50),
    USE_YN CHAR(1) DEFAULT 'Y',
    CONSTRAINT PK_LGCY_SYS_CUST PRIMARY KEY (CUST_ID, LGCY_SYS_CD),
    CONSTRAINT FK_TB_LGCY_SYS_CUST_TB_CUST FOREIGN KEY (CUST_ID) REFERENCES TB_CUST (CUST_ID)
);
COMMENT ON COLUMN TB_LGCY_SYS_CUST.CUST_ID IS 'id';
COMMENT ON COLUMN TB_LGCY_SYS_CUST.LGCY_SYS_CD IS '시스템코드';
COMMENT ON COLUMN TB_LGCY_SYS_CUST.LGCY_CUST_ID IS '레거시 시스템 고객 ID';
COMMENT ON COLUMN TB_LGCY_SYS_CUST.LGCY_CUST_NM IS '레거시 시스템 고객명';
COMMENT ON COLUMN TB_LGCY_SYS_CUST.USE_YN IS '사용 유무';